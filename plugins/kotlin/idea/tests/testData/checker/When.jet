fun foo() {
    val s = ""
    val x = 1
    when (x) {
      is <error>String</error> => 1
      !is Int => 1
      is Any? => 1
      <error>s</error> => 1
      1 => 1
      1 + <error>a</error> => 1
      in 1..<error>a</error> => 1
      !in 1..<error>a</error> => 1
      .<error>a</error> => 1
      .equals(1).<error>a</error> => 1
      <warning>?.</warning>equals(1) => 1
    }
    when (<warning>x</warning>?:null) {
      <error>.</error>equals(1) => 1
      ?.equals(1).equals(2) => 1
    }
}

val _type_test : Int = foo() // this is needed to ensure the inferred return type of foo()
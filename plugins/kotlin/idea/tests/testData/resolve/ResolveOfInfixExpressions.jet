import java.*
import util.*

~X~class X<~T~T> {
  fun foo(a : `T`T) : `X`X<`T`T>{}
  ~plus~fun plus(t : `T`T) : Int {}
  ~minus~fun minus(t : String) : Int {}
  ~times~fun times(t : String) : Int {}
  ~div~fun div(t : String) : Int {}
  ~mod~fun mod(t : String) : Int {}
  ~rangeTo~fun rangeTo(t : String) : Int {}
  ~==~fun equals(a : Any?) : Boolean {}
  ~contains~fun contains(a : Any?) : Boolean {}
}

~t~fun <~t.T~T> t(~t.t~t : `t.T`T) : `t.T`T {
  `t`t<Int>(1)`:std::Int`
  `t`t<`t.T`T>(`t.t`t)`:t.T`
  new `X`X<`t.T`T>()
  1 `std::Int.plus(Int)`+ 1
  1 `std::Int.plus(Int)`+= 1
  new X<String>() `plus`+ "1"
  new X<String>() `plus`plus "sadfas"
  new X<String>().`plus`plus("")
  val x = new X<String>()
  x `minus`- ""
  x `times`* ""
  x `div`/ ""
  x `mod`% ""
  x `rangeTo`.. ""
  x `==`== ""
  x `==`!= 1
  1 `contains`in x
  1 `contains`!in x
}

~Foo~class Foo {
  ~set1~fun set(i : Int, val : String) {}
  ~get1~fun get(i : Int) : Int {}
  ~get2~fun get(i : Int, j : Int) : String {}
  ~get3~fun get(i : Object) : Any {return i }
  ~+=~fun plusAssign(a : Any?) : Unit {}
}

~Bar~class Bar : Foo {
  ~not~fun not() : String {}
  ~inc~fun inc() : Unit
  ~dec~fun dec() : Unit
}

fun <T> tt(t : T) : T {
  val x : List = 0
  x`java::java.util.List.get()`[1]
  val foo = new Bar()
  foo`!`[null, 1]
  foo`get2`[1, 1]
  foo`get1`[1]
  foo`set1`[1] = ""
  foo`!`[1, 2] = ""
  x`java::java.util.List.set()`[1] = null
  (x`java::java.util.List.set()`[1]) = null
  x`!`[null] = null
  (x`!`[null, 2]) = null
  (`not`!foo)[1]`:std::Char`
  val y = new Bar()
  y`inc`++
  `inc`++y
  `dec`--y
  y`dec`--
  y `+=`+= 1
  1 `std::Int.compareTo(Double)`> 2.0
  1 `std::Int.compareTo(Double)`< 2.0
  1 `std::Int.compareTo(Double)`>= 2.0
  1 `std::Int.compareTo(Double)`<= 2.0
}

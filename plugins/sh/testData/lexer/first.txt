Shebang ('#!/bin/bash\n')
linefeed ('\n')
Comment ('# Simple line count example, using bash')
linefeed ('\n')
Comment ('#')
linefeed ('\n')
Comment ('# Bash tutorial: http://linuxconfig.org/Bash_scripting_Tutorial#8-2-read-file-into-bash-array')
linefeed ('\n')
Comment ('# My scripting link: http://www.macs.hw.ac.uk/~hwloidl/docs/index.html#scripting')
linefeed ('\n')
Comment ('#')
linefeed ('\n')
Comment ('# Usage: ./line_count.sh file')
linefeed ('\n')
Comment ('# -----------------------------------------------------------------------------')
linefeed ('\n')
linefeed ('\n')
Comment ('# Link filedescriptor 10 with stdin')
linefeed ('\n')
word ('exec')
WHITE_SPACE (' ')
int literal ('10')
< ('<')
&[0-9] filedescriptor ('&0')
linefeed ('\n')
Comment ('# stdin replaced with a file supplied as a first argument')
linefeed ('\n')
word ('exec')
WHITE_SPACE (' ')
< ('<')
WHITE_SPACE (' ')
variable ('$1')
linefeed ('\n')
Comment ('# remember the name of the input file')
linefeed ('\n')
assignment_word ('in')
= ('=')
variable ('$1')
linefeed ('\n')
linefeed ('\n')
Comment ('# init')
linefeed ('\n')
assignment_word ('file')
= ('=')
string begin ('"')
string content ('current_line.txt')
string end ('"')
linefeed ('\n')
let ('let')
WHITE_SPACE (' ')
assignment_word ('count')
= ('=')
int literal ('0')
linefeed ('\n')
linefeed ('\n')
Comment ('# this while loop iterates over all lines of the file')
linefeed ('\n')
while ('while')
WHITE_SPACE (' ')
word ('read')
WHITE_SPACE (' ')
word ('LINE')
linefeed ('\n')
do ('do')
linefeed ('\n')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
Comment ('# increase line counter')
linefeed ('\n')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
(( ('((')
word ('count')
++ ('++')
)) ('))')
linefeed ('\n')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
Comment ('# write current line to a tmp file with name $file (not needed for counting)')
linefeed ('\n')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
word ('echo')
WHITE_SPACE (' ')
variable ('$LINE')
WHITE_SPACE (' ')
> ('>')
WHITE_SPACE (' ')
variable ('$file')
linefeed ('\n')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
Comment ('# this checks the return code of echo (not needed for writing; just for demo)')
linefeed ('\n')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
if ('if')
WHITE_SPACE (' ')
[ (left conditional) ('[ ')
variable ('$?')
WHITE_SPACE (' ')
cond_op ('-ne')
WHITE_SPACE (' ')
word ('0')
 ] (right conditional) (' ]')
linefeed ('\n')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
then ('then')
WHITE_SPACE (' ')
word ('echo')
WHITE_SPACE (' ')
string begin ('"')
string content ('Error in writing to file ')
$ ('$')
{ ('{')
word ('file')
} ('}')
string content ('; check its permissions!')
string end ('"')
linefeed ('\n')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
WHITE_SPACE (' ')
fi ('fi')
linefeed ('\n')
done ('done')
linefeed ('\n')
linefeed ('\n')
word ('echo')
WHITE_SPACE (' ')
string begin ('"')
string content ('Number of lines: ')
variable ('$count')
string end ('"')
linefeed ('\n')
word ('echo')
WHITE_SPACE (' ')
string begin ('"')
string content ('The last line of the file is: ')
backquote ` ('`')
word ('cat')
WHITE_SPACE (' ')
$ ('$')
{ ('{')
word ('file')
} ('}')
backquote ` ('`')
string end ('"')
linefeed ('\n')
linefeed ('\n')
Comment ('# Note: You can achieve the same by just using the tool wc like this')
linefeed ('\n')
word ('echo')
WHITE_SPACE (' ')
string begin ('"')
string content ('Expected number of lines: ')
backquote ` ('`')
word ('wc')
WHITE_SPACE (' ')
word ('-l')
WHITE_SPACE (' ')
variable ('$in')
backquote ` ('`')
string end ('"')
linefeed ('\n')
linefeed ('\n')
Comment ('# restore stdin from filedescriptor 10')
linefeed ('\n')
Comment ('# and close filedescriptor 10')
linefeed ('\n')
word ('exec')
WHITE_SPACE (' ')
int literal ('0')
< ('<')
&[0-9] filedescriptor ('&10')
WHITE_SPACE (' ')
int literal ('10')
< ('<')
&[0-9] filedescriptor ('&-')
